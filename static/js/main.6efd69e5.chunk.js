(this["webpackJsonpreact-exam-app"]=this["webpackJsonpreact-exam-app"]||[]).push([[0],{33:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){},49:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){"use strict";c.r(t);var s=c(2),n=c.n(s),a=c(26),r=c.n(a),i=c(5),o=(c(33),c(24)),l=c(14),j=c(6),d=c(21);c(34),c(54);d.a.initializeApp({apiKey:"AIzaSyAXlhk_tqZeTzWvWFhbWWjHpx1RjElaEEk",authDomain:"angular-exam-bea50.firebaseapp.com",projectId:"angular-exam-bea50",storageBucket:"angular-exam-bea50.appspot.com",messagingSenderId:"356341360116",appId:"1:356341360116:web:f62528b7b03b85f94a05a1"});var b=d.a,u=n.a.createContext(),x=(c(37),c(38),c(1));var h=function(){var e=Object(s.useContext)(u);return Object(x.jsxs)("header",{className:"header",children:[Object(x.jsxs)("nav",{className:"nav",children:[Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:Object(x.jsx)(i.b,{to:"/softuni-react-exam/shop",children:"Shop"})}),Object(x.jsx)("li",{children:Object(x.jsx)(i.b,{to:"/softuni-react-exam",children:"About us"})})]}),Object(x.jsx)(i.b,{className:"img",to:"/softuni-react-exam",children:Object(x.jsx)("img",{alt:"site-logo",src:"/softuni-react-exam/images.png"})}),e?Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:Object(x.jsx)(i.b,{to:"/softuni-react-exam/profile",children:"Profile"})}),Object(x.jsx)("li",{children:Object(x.jsx)(i.b,{to:"/softuni-react-exam/logout",children:"Logout"})})]}):Object(x.jsxs)("ul",{children:[Object(x.jsx)("li",{children:Object(x.jsx)(i.b,{to:"/softuni-react-exam/login",children:"Login"})}),Object(x.jsx)("li",{children:Object(x.jsx)(i.b,{to:"/softuni-react-exam/register",children:"Register"})})]})]}),Object(x.jsxs)("h3",{children:["Welcome, ",e?e.displayName:"Guest :)"]}),e?Object(x.jsx)("h3",{className:"cart",children:Object(x.jsx)(i.b,{className:"cart-a",to:"/softuni-react-exam/cart",children:"Shopping Cart"})}):""]})};c(44);var O=function(){return Object(x.jsx)("footer",{className:"footer",children:Object(x.jsx)("p",{children:"Simple e-commerce app to serve as an exam breaker @ Softuni Bulgaria... and all hail React :)"})})};c(45);var m=function(){return Object(x.jsx)("h1",{children:"LandingPage here"})};c(46),c(47);var p=function(e){var t=e.item,c=e.id;return Object(x.jsx)("section",{className:"shop-item",children:Object(x.jsxs)(i.b,{to:"/softuni-react-exam/details/".concat(c),children:[Object(x.jsx)("h2",{children:t.title}),Object(x.jsxs)("h4",{children:[t.price,"$"]}),Object(x.jsx)("img",{alt:"",src:t.imageUrl})]})})};var f=function(e){var t=Object(s.useState)([]),c=Object(l.a)(t,2),n=c[0],a=c[1];return Object(s.useEffect)((function(){b.firestore().collection("products").get().then((function(e){var t=[];e.forEach((function(e){var c=e.data();t.push({id:e.id,info:c})})),a(t)}))}),[]),Object(x.jsx)("section",{className:"shop-list",children:n.map((function(e){return Object(x.jsx)(p,{id:e.id,item:e.info},e.id)}))})};c(48);var g=function(){return Object(s.useContext)(u)?Object(x.jsx)(j.a,{to:"/softuni-react-exam"}):Object(x.jsxs)("section",{className:"login-page",children:[Object(x.jsx)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.email.value,c=e.target.password.value;b.auth().signInWithEmailAndPassword(t,c)},children:Object(x.jsxs)("fieldset",{children:[Object(x.jsx)("legend",{children:"Login Form"}),Object(x.jsxs)("section",{className:"field",children:[Object(x.jsx)("label",{htmlFor:"email",children:"Email"}),Object(x.jsxs)("span",{className:"input",children:[Object(x.jsx)("i",{className:"icon-envelope"}),Object(x.jsx)("input",{type:"text",name:"email",id:"email",placeholder:"email"})]})]}),Object(x.jsxs)("section",{className:"field",children:[Object(x.jsx)("label",{htmlFor:"password",children:"Password"}),Object(x.jsxs)("span",{className:"input",children:[Object(x.jsx)("i",{className:"icon-key"}),Object(x.jsx)("input",{type:"text",name:"password",id:"password",placeholder:"password"})]})]}),Object(x.jsx)("input",{className:"button submit",type:"submit",value:"Login"})]})}),Object(x.jsx)(i.b,{to:"/softuni-react-exam/register",children:Object(x.jsx)("p",{children:"You don't have an account ? Click here to Register"})})]})};c(49);var v=function(e){var t=e.updateUserDisplayNameOnRegister;return Object(s.useContext)(u)?Object(x.jsx)(j.a,{to:"/softuni-react-exam"}):Object(x.jsxs)("section",{className:"register-page",children:[Object(x.jsx)("form",{onSubmit:function(e){e.preventDefault();var c=e.target.email.value,s=e.target.password.value,n=e.target.name.value;b.auth().createUserWithEmailAndPassword(c,s).then((function(){b.auth().currentUser.updateProfile({displayName:n}).then((function(){t(!0),b.firestore().collection("cart").doc(c).set({cart:[]}),b.firestore().collection("orders").doc(c).set({orders:[]})}))}))},children:Object(x.jsxs)("fieldset",{children:[Object(x.jsx)("legend",{children:"Register Form"}),Object(x.jsxs)("section",{className:"field",children:[Object(x.jsx)("label",{htmlFor:"name",children:"Name"}),Object(x.jsxs)("span",{className:"input",children:[Object(x.jsx)("i",{className:"icon-user"}),Object(x.jsx)("input",{type:"text",name:"name",id:"name",placeholder:"Name"})]})]}),Object(x.jsxs)("section",{className:"field",children:[Object(x.jsx)("label",{htmlFor:"email",children:"Email"}),Object(x.jsxs)("span",{className:"input",children:[Object(x.jsx)("i",{className:"icon-envelope"}),Object(x.jsx)("input",{type:"text",name:"email",id:"email",placeholder:"email"})]})]}),Object(x.jsxs)("section",{className:"field",children:[Object(x.jsx)("label",{htmlFor:"password",children:"Password"}),Object(x.jsxs)("span",{className:"input",children:[Object(x.jsx)("i",{className:"icon-key"}),Object(x.jsx)("input",{type:"text",name:"password",id:"password",placeholder:"password"})]})]}),Object(x.jsxs)("section",{className:"field",children:[Object(x.jsx)("label",{htmlFor:"repeat",children:"Repeat password"}),Object(x.jsxs)("span",{className:"input",children:[Object(x.jsx)("i",{className:"icon-key"}),Object(x.jsx)("input",{type:"text",name:"repeat",id:"repeat",placeholder:"repeat password"})]})]}),Object(x.jsx)("input",{className:"button submit",type:"submit",value:"Register"})]})}),Object(x.jsx)(i.b,{to:"/softuni-react-exam/login",children:Object(x.jsx)("p",{children:"You already have an account ? Click here to Login"})})]})};c(50);var N=function(){return Object(x.jsx)("h1",{children:"Profile here"})};c(51);var y=function(e){var t=e.match,c=e.userCart,n=e.setUserCart,a=Object(s.useContext)(u),r=Object(s.useState)({}),o=Object(l.a)(r,2),j=o[0],d=o[1],h=null===t||void 0===t?void 0:t.params.id;return Object(s.useEffect)((function(){b.firestore().collection("products").doc(h).get().then((function(e){return d(e.data())}))}),[h]),Object(x.jsxs)("section",{className:"details",children:[Object(x.jsx)("h1",{children:j.title}),Object(x.jsx)("img",{alt:"product",src:j.imageUrl}),Object(x.jsx)("p",{children:j.description}),a?Object(x.jsx)("button",{onClick:function(){var e=c.slice(),t=e.findIndex((function(e){return e.id===h}));t>=0?e[t].qty++:(j.id=h,j.qty=1,e.push(j)),n(e),b.firestore().collection("cart").doc(a.email).set({cart:e})},children:"Add to cart"}):Object(x.jsx)(i.b,{to:"/softuni-react-exam/login",children:Object(x.jsx)("button",{children:"Login to buy"})})]})};c(52);var C=function(e){var t=e.total,c=e.userCart,n=e.subOrAdd,a=e.placeOrder,r=e.clearCart;return Object(s.useContext)(u)?0===(null===c||void 0===c?void 0:c.length)?Object(x.jsxs)("section",{className:"shop-cart",children:[Object(x.jsx)("h1",{children:"You cart is empty"}),";"]}):Object(x.jsxs)("section",{className:"shop-cart",children:[Object(x.jsx)("h1",{children:"Check out your cart below"}),Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Title"}),Object(x.jsx)("th",{children:"Price"}),Object(x.jsx)("th",{children:"Quantity"}),Object(x.jsx)("th",{children:"Total"})]})}),Object(x.jsx)("tbody",{children:null===c||void 0===c?void 0:c.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)(i.b,{to:"/softuni-react-exam/details/".concat(e.id),children:e.title})}),Object(x.jsxs)("td",{children:[Number(e.price).toFixed(2),"$"]}),Object(x.jsxs)("td",{children:[Object(x.jsx)("span",{onClick:function(){return n(e.id,"sub")},className:"qty",children:"-"}),e.qty,Object(x.jsx)("span",{onClick:function(){return n(e.id,"add")},className:"qty",children:"+"})]}),Object(x.jsxs)("td",{children:[(Number(e.price)*Number(e.qty)).toFixed(2),"$"]})]},e.id)}))}),Object(x.jsx)("tfoot",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"------"}),Object(x.jsx)("td",{children:"------"}),Object(x.jsx)("td",{children:"------"}),Object(x.jsxs)("th",{children:[t.toFixed(2),"$"]})]})})]}),Object(x.jsxs)("section",{className:"actions",children:[Object(x.jsx)("button",{onClick:r,children:"Clear Cart"}),Object(x.jsx)("button",{onClick:a,children:"Order Now"})]})]}):Object(x.jsx)(j.a,{to:"/softuni-react-exam/login"})};var w=function(e){var t=e.userCart,c=e.setUserCart,n=Object(s.useContext)(u),a=Object(s.useState)(0),r=Object(l.a)(a,2),i=r[0],o=r[1];Object(s.useEffect)((function(){var e=0;null===t||void 0===t||t.forEach((function(t){e+=+t.price*+t.qty})),o(e)}),[t]);var j=function(){c([]),b.firestore().collection("cart").doc(n.email).set({cart:[]})};return Object(x.jsx)("section",{children:Object(x.jsx)(C,{total:i,userCart:t,subOrAdd:function(e,s){var a=t.slice(),r=a.findIndex((function(t){return t.id===e}));"sub"===s?(a[r].qty--,o((function(e){return e-+a[r].price})),0===a[r].qty&&a.splice(r,1)):(a[r].qty++,o((function(e){return e+ +a[r].price}))),c(a),b.firestore().collection("cart").doc(n.email).set({cart:a})},placeOrder:function(){var e=new Date,c=e.toISOString().slice(0,10),s=e.toISOString().slice(11,19),a={total:i.toFixed(2),date:"On ".concat(c," at ").concat(s),products:t};b.firestore().collection("orders").doc(n.email).get().then((function(e){var t=e.data().orders;t.push(a),b.firestore().collection("orders").doc(n.email).set({orders:t}),j()}))},clearCart:j})})},S="/softuni-react-exam";var k=function(){var e=Object(s.useState)({}),t=Object(l.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)(!1),r=Object(l.a)(a,2),i=r[0],d=r[1],p=Object(s.useState)([]),C=Object(l.a)(p,2),k=C[0],F=C[1];return Object(s.useEffect)((function(){b.auth().onAuthStateChanged(n)}),[i]),Object(s.useEffect)((function(){c&&b.firestore().collection("cart").doc(c.email).get().then((function(e){var t=e.data();F(null===t||void 0===t?void 0:t.cart)}))}),[c]),Object(x.jsx)(u.Provider,{value:c,children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(h,{}),Object(x.jsx)("main",{children:Object(x.jsxs)(j.d,{children:[Object(x.jsx)(j.b,{path:S,exact:!0,component:m}),Object(x.jsx)(j.b,{path:"".concat(S,"/shop"),exact:!0,component:f}),Object(x.jsx)(j.b,{path:"".concat(S,"/details/:id"),exact:!0,render:function(e){return Object(x.jsx)(y,Object(o.a)(Object(o.a)({},e),{},{userCart:k,setUserCart:F}))}}),Object(x.jsx)(j.b,{path:"".concat(S,"/login"),exact:!0,component:g}),Object(x.jsx)(j.b,{path:"".concat(S,"/register"),exact:!0,children:Object(x.jsx)(v,{updateUserDisplayNameOnRegister:d})}),Object(x.jsx)(j.b,{path:"".concat(S,"/cart"),exact:!0,children:Object(x.jsx)(w,{setUserCart:F,userCart:k})}),Object(x.jsx)(j.b,{path:"".concat(S,"/profile"),exact:!0,component:N}),Object(x.jsx)(j.b,{path:"".concat(S,"/logout"),exact:!0,render:function(){return b.auth().signOut(),Object(x.jsx)(j.a,{to:S})}})]})}),Object(x.jsx)(O,{})]})})},F=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,55)).then((function(t){var c=t.getCLS,s=t.getFID,n=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),s(e),n(e),a(e),r(e)}))};r.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(i.a,{children:Object(x.jsx)(k,{})})}),document.getElementById("root")),F()}},[[53,1,2]]]);
//# sourceMappingURL=main.6efd69e5.chunk.js.map